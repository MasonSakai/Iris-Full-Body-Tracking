{% extends "base.html" %}

{% block content %}
	<h1>April Tag Manager</h1>

	<div class="mt-3 pb-3 rounded-5 bg-dark-subtle border border-dark-subtle">
		<table class="w-100 text-center table table-hover caption-top">
			<caption class="ps-3 border-bottom border-dark-subtle">
				<h5>April tag detectors: {{ detectors|length }}</h5>
			</caption>
			{% if detectors|length > 0 %}
			<thead class="fw-bolder border-bottom border-4 border-start-0 border-end-0 border-top-0 border-dark-subtle">
				<tr>
					<td class="p-2">ID</td>
					<td class="p-2">Families</td>
					<td class="p-2">Default Tag Size</td>
				</tr>
			</thead>
			<tbody>
				{% for detector in detectors %}
				<tr id="detector-{{ detector.id }}" class="p-1 border-bottom border-dark-subtle" onclick="openPopupURL('{{url_for('apriltag.view_detector', id=detector.id)}}')">
					<td class="p-2">{{ detector.id }}</td>
					<td class="p-2">{{ detector.families }}</td>
					<td class="p-2">{{ detector.default_tag_size * 100 }}cm</td>
				</tr>
				{% endfor %}
			</tbody>
			{% endif %}
		</table>
	</div>

	<div class="mt-3 pb-3 rounded-5 bg-dark-subtle border border-dark-subtle">
		<table class="w-100 text-center table table-hover caption-top">
			<caption class="ps-3 border-bottom border-dark-subtle"><h5>Known April Tags: {{ known_tags|length }}</h5></caption>
			{% if known_tags|length > 0 %}
			<thead class="fw-bolder border-bottom border-4 border-start-0 border-end-0 border-top-0 border-dark-subtle">
				<tr>
					<td class="p-2">Detector</td>
					<td class="p-2">Family</td>
					<td class="p-2">ID</td>
					<td class="p-2">Tag Size</td>
				</tr>
			</thead>
			<tbody>
				{% for tag in known_tags %}
				<tr id="tag-{{ tag.id }}" class="p-1 border-bottom border-dark-subtle" onclick="openPopupURL('{{url_for('apriltag.view_tag', id=tag.id)}}')">
					<td class="p-2">{{ tag.detector_id }}</td>
					<td class="p-2">{{ tag.family }}</td>
					<td class="p-2">{{ tag.tag_id }}</td>
					<td class="p-2">{{ tag.tag_size * 100 }}cm</td>
				</tr>
				{% endfor %}
			</tbody>
			{% endif %}
		</table>
	</div>

	<div class="mt-3 pb-3 rounded-5 bg-dark-subtle border border-dark-subtle">
		<table class="w-100 text-center table table-hover caption-top">
			<caption class="ps-3 border-bottom border-dark-subtle"><h5>Discovered April Tags: {{ found_tags|length }}</h5></caption>
			{% if found_tags|length > 0 %}
			<thead class="fw-bolder border-bottom border-4 border-start-0 border-end-0 border-top-0 border-dark-subtle">
				<tr>
					<td class="p-2">Family</td>
					<td class="p-2">ID</td>
					<td class="p-2">Seen by</td>
				</tr>
			</thead>
			<tbody>
				{% for tag in known_tags %}
				<tr id="tag-{{ tag.family }}:{{ tag.id }}" class="p-1 border-bottom border-dark-subtle" onclick="openPopupURL('{{url_for('apriltag.view_found_tag', family=tag.family, id=tag.id)}}')">
					<td class="p-2">{{ tag.family }}</td>
					<td class="p-2">{{ tag.tag_id }}</td>
					<td class="p-2">{{ tag.tag_size }}</td>
				</tr>
				{% endfor %}
			</tbody>
			{% endif %}
		</table>
	</div>

	{% include '_popup.html' %}
{% endblock %}

{% block stylesheets %}
	{{ super() }}
	<link rel="stylesheet" href="{{ url_for('main.static', filename='css/form-decorators.css') }}">
{% endblock %}